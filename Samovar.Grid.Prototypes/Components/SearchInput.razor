@using Microsoft.AspNetCore.Components
@using System.Globalization
@using System.Threading

<input spellcheck="false" autocomplete="off" type="text" id="@id" @oninput="OnInput" />

@code
{
    [Parameter]
    public EventCallback<DateTime?> DateChanged { get; set; }

    string id = Guid.NewGuid().ToString();

    CancellationTokenSource tokenSource;//= new CancellationTokenSource();
    async Task OnInput(ChangeEventArgs args)
    {
        tokenSource?.Cancel();
        tokenSource = new CancellationTokenSource();
        var token = tokenSource.Token;

        try
        {
            await Task.Run(() =>
            {
                for (int i = 0; i < 20; i++)
                {
                    Thread.Sleep(300);

                    if (token.IsCancellationRequested)
                    {
                        token.ThrowIfCancellationRequested();
                    }
                }
            });
        }
        catch (OperationCanceledException exo)
        {

        }
        catch (Exception ex)
        {

        }
        finally {
            tokenSource.Dispose();
        }
    }

}